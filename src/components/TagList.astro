---
import { capitalizeFirstLetter } from "../helpers/helper";
import type { Tag } from "../model/model";

interface Props {
  readonly basePath: string;
  readonly tags: readonly Tag[];
  readonly currentTag?: string;
}

const { tags, currentTag, basePath } = Astro.props;
---

<div class="tag-list">
  <div class:list={["chip", { active: currentTag === "view-all" }]}>
    <a class="tag-link" href={basePath}>View all</a>
  </div>
  {
    tags.map((t) => (
      <div class:list={["chip", { active: currentTag === t.tag }]}>
        <a class="tag-link" href={`${basePath}/tags/${t.tag}`}>
          {capitalizeFirstLetter(t.tag)} ({t.count})
        </a>
      </div>
    ))
  }
</div>

<style>
  .tag-list {
    display: flex;
    padding: 0;
    gap: 0.75rem;
    font-size: 0.9375rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .chip {
    background-color: rgb(var(--gray-light));
    padding: 0.5rem 1rem;
    border-radius: 50px;
    border: 1px solid rgb(var(--gray-light));
    transition: all 0.3s ease;
  }

  .chip:hover {
    background-color: rgb(var(--gray-dark));
    border-color: rgb(var(--accent));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .tag-link {
    text-decoration: none;
    color: rgb(var(--gray-dark));
    font-weight: 500;
    white-space: nowrap;
  }

  .chip:hover .tag-link {
    color: rgb(var(--white));
  }

  .active {
    background-color: gainsboro;
    border-color: rgb(var(--accent-dark));
  }

  .active .tag-link {
  }

  .active:hover {
    background-color: rgb(var(--accent-dark));
    border-color: rgb(var(--accent-dark));
    transform: translateY(-2px);
  }

  .active:hover .tag-link {
    /* color: rgb(var(--white)); */
  }

  @media (max-width: 768px) {
    .tag-list {
      gap: 0.5rem;
      font-size: 0.875rem;
    }

    .chip {
      padding: 0.4rem 0.875rem;
    }
  }

  @media (max-width: 480px) {
    .tag-list {
      gap: 0.375rem;
      font-size: 0.8125rem;
    }

    .chip {
      padding: 0.375rem 0.75rem;
    }
  }

  @media (prefers-color-scheme: dark) {
    .chip {
      background-color: rgb(var(--gray-dark));
      padding: 0.5rem 1rem;
      border-radius: 50px;
      border: 1px solid rgb(var(--gray-light));
      transition: all 0.3s ease;
    }

    .chip:hover {
      background-color: rgb(var(--gray-light));
      border-color: rgb(var(--accent));
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .tag-link {
      text-decoration: none;
      color: rgb(var(--gray-light));
      font-weight: 500;
      white-space: nowrap;
    }

    .chip:hover .tag-link {
      color: black;
    }

    .active {
      background-color: gainsboro;
      border-color: rgb(var(--accent-dark));
    }

    .active .tag-link {
    }

    .active:hover {
      transform: translateY(-2px);
    }

    .active:hover .tag-link {
    }

    .active .tag-link {
      color: black;
    }
  }
</style>
